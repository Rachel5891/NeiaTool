<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Random NEIA Forms</title>
</head>
<body>

<h1>Welcome to the NEIA Tool Random Selection</h1>
<p>Click the links below to access your assigned forms:</p>
<div id="links"></div>

<script>
// 1) List of Cognito form links
var formLinks = [
  "https://www.cognitoforms.com/MGHIHP1/CVINEIA",
  "https://www.cognitoforms.com/MGHIHP1/InfectiousDiseaseSurvey",
  "https://www.cognitoforms.com/MGHIHP1/MonkeypoxPreparationOnCollegeCampuses"
];

// 2) How many links to assign per user
var numLinks = 2;

// 3) Function to shuffle the links (Fisher-Yates Shuffle)
function shuffle(array) {
  let currentIndex = array.length, randomIndex;
  while (currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }
  return array;
}

// 4) Check if user already has assigned links in localStorage
var storedLinks = localStorage.getItem("savedLinks");

var selectedLinks;
if (storedLinks) {
  // 5) If saved links exist, use them
  selectedLinks = JSON.parse(storedLinks);
} else {
  // 6) If no saved links, randomly pick new ones
  shuffle(formLinks);
  selectedLinks = formLinks.slice(0, numLinks);
  localStorage.setItem("savedLinks", JSON.stringify(selectedLinks));
}

// 7) Display the links on the page
var linksDiv = document.getElementById("links");
selectedLinks.forEach(function(link, index) {
  var a = document.createElement("a");
  a.href = link;
  a.target = "_blank";  // Open in a new tab
  a.innerText = "Form " + (index + 1);
  linksDiv.appendChild(a);
  linksDiv.appendChild(document.createElement("br"));
});
</script>

</body>
</html>



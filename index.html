 <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>NEIA Tool - Informed Consent</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; padding: 20px; line-height: 1.5; }
    h1, h2 { color: #333; }
    .hidden { display: none; } 
    .button { background: #007bff; color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 10px; }
    .button:hover { background: #0056b3; }
    /* Developer Mode button alignment */
    .dev-mode {
      display: flex;
      justify-content: flex-end;
    }
    .dev-button {
      background: #aaa; 
      margin-top: 0;
      margin-right: 20px;
    }
  </style>
</head>
<body>
  <div style="background-color: #ffeeba; padding: 30px; border: 1px solid #f0ad4e; color: #856404; font-family: Arial, sans-serif; max-width: 700px; margin: 100px auto; text-align: center;">
    <h1>NEIA Tool Pilot Study</h1>
    <p>The study is currently <strong>paused</strong>. Please check back later. If you have questions, contact <a href="mailto:rlcox@mghihp.edu">rlcox@mghihp.edu</a>.</p>
  </div>
<!-- üîπ Informed Consent Section -->
<!-- 
<div id="consentSection">
  <h1>NEIA Pilot Study - Informed Consent</h1>
  <div class="consent-box">
    <h2>Purpose of the Study</h2>
    <p>The purpose of this pilot research study is to evaluate the effectiveness and accuracy of a newly developed instrument designed to validate NCLEX-style questions. This will involve comparing your assessment scores with those generated by a custom artificial intelligence (AI) scoring model.</p>

    <h2>What Does the Study Involve?</h2>
    <ul>
      <li>Use the instrument to assess a set of NCLEX-style questions.</li>
      <li>Provide scores based on the criteria outlined in the instrument.</li>
      <li>Allow your scores to be compared to those generated by our custom AI model to assess the instrument's reliability and validity.</li>
      <li>As a token of our appreciation for your time, you will receive a $50 gift card after you complete the survey in its entirety. Receipt of the gift card is contingent on submitting a fully completed survey. Your participation is entirely voluntary, and you may withdraw at any point without penalty or loss of benefits. However, to be eligible for the gift card, you must finish and submit the survey. Please note that any information you provide will remain confidential and will be used solely for the purposes of this research study.</li>
    </ul>

    <h2>Confidentiality & Risks</h2>
    <p>There are minimal risks, including the loss of confidentiality. Every effort will be made to maintain confidentiality. Your de-identified information may be shared with other researchers without your additional informed consent.</p>

    <h2>Contact Information</h2>
    <p>The Principal Investigator (PI) of this project is Dr. Anshul Kumar (<a href="mailto:akumar@mghihp.edu">akumar@mghihp.edu</a>).</p>
    <p>The co-investigator is Dr. Rachel Cox Simms (<a href="mailto:rlcox@mghihp.edu">rlcox@mghihp.edu</a>).</p>
    <p>If you would like to speak to someone not involved in this research about your rights as a research subject, or any concerns or complaints you may have about the research, contact the Mass General Brigham IRB at (857) 282-1900.</p>

    <h2>Agreement to Participate</h2>
    <p><strong>By clicking "Submit," you agree to participate in this study. You will receive 5 randomly assigned NCLEX questions. If you do not complete all 5 in one sitting, you can return using the same link as long as you do not clear your cache.</strong></p>

    <button class="button" onclick="startSurvey()">Submit</button>
  </div>
</div>

<!-- üîπ Assigned Forms Section (Hidden Until Consent is Given) -->
<div id="surveySection" class="hidden">
  <h1>Your Assigned NCLEX Questions</h1>
  <p>Click the link below to begin. After completing a form, you will be automatically redirected to the next one.</p>
  <div id="links"></div>
</div>

<!-- üîπ Developer Mode Button -->
<div class="dev-mode">
  <button class="button dev-button" onclick="enableDevMode()">Developer Mode: Reset</button>
</div>

<script>
console.log("Script started.");

// 1Ô∏è‚É£ Full list of available Cognito Forms
var formLinks = [
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion2",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion3",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion4",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion5",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion6",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion7",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion8",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion9",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion10",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion11",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion12",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion13",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion14",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion15",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion16",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion17",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion18",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion19",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion20",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion21",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion22",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion23",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion24",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion25",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion26",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion27",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion28",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion29",
  "https://www.cognitoforms.com/MGHIHP1/NEIAToolQuestion30"
  
];

// 2Ô∏è‚É£ Number of forms each participant gets
var numLinks = 5;

// 3Ô∏è‚É£ Shuffle function to randomize order
function shuffle(array) {
  let currentIndex = array.length, randomIndex;
  while (currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }
  return array;
}

// 4Ô∏è‚É£ Check if the user has previously consented
var hasConsented = localStorage.getItem("hasConsented");
console.log("hasConsented:", hasConsented);

// 5Ô∏è‚É£ Check if the user already has assigned questions
var storedLinks = localStorage.getItem("savedLinks");
console.log("storedLinks:", storedLinks);

var completedForms = JSON.parse(localStorage.getItem("completedForms")) || [];
console.log("completedForms:", completedForms);

var selectedLinks;
if (storedLinks) {
  selectedLinks = JSON.parse(storedLinks);
  console.log("Using storedLinks:", selectedLinks);
} else {
  console.log("No storedLinks found. Shuffling the formLinks.");
  shuffle(formLinks);
  selectedLinks = formLinks.slice(0, numLinks);
  localStorage.setItem("savedLinks", JSON.stringify(selectedLinks));
  console.log("Newly selected links:", selectedLinks);
}

// 6Ô∏è‚É£ Filter out already completed forms
selectedLinks = selectedLinks.filter(link => !completedForms.includes(link));
console.log("Links after filtering completed forms:", selectedLinks);

// 7Ô∏è‚É£ Display the correct section based on consent status
if (hasConsented) {
  document.getElementById("consentSection").style.display = "none";
  document.getElementById("surveySection").classList.remove("hidden");
}

// 8Ô∏è‚É£ If all assigned forms are completed, update only the survey section
if (selectedLinks.length === 0) {
  console.log("All assigned forms have been completed.");
  var surveySection = document.getElementById("surveySection");
  surveySection.innerHTML = "<h1>Thank you! You have completed all assigned forms. You may close this window.</h1>";
} else {
  // 9Ô∏è‚É£ Get the next form link
  var nextForm = selectedLinks[0];
  console.log("Next form link:", nextForm);

  // üîü Update completed forms when they return from submission
  function markCompleted() {
    console.log("Marking form as completed:", nextForm);
    completedForms.push(nextForm);
    localStorage.setItem("completedForms", JSON.stringify(completedForms));
  }

  // 1Ô∏è‚É£1Ô∏è‚É£ Display the next form
  var linksDiv = document.getElementById("links");
  var a = document.createElement("a");
  a.href = nextForm;
  a.target = "_self";  // Open in the same window
  a.innerText = "Click here to start your next question";
  a.onclick = markCompleted; // Mark the form as completed when clicked
  linksDiv.appendChild(a);
}

function startSurvey() {
  console.log("Consent given. Redirecting to intro form.");
  localStorage.setItem("hasConsented", "true");
  window.location.href = "https://www.cognitoforms.com/MGHIHP1/NEIAToolIntro";
}

// Function to enable developer mode by clearing local storage
function enableDevMode() {
  console.log("Dev mode button clicked.");
  if (confirm("Are you sure you want to clear all local data and start fresh?")) {
    console.log("Clearing localStorage...");
    localStorage.clear();
    console.log("Reloading page...");
    location.reload();
  }
}
</script>
-->
</body>
</html>



